# 搜索功能测试指南

## 🧪 功能测试清单

### 1. 基础搜索功能测试

- [ ] **工具栏搜索按钮**: 点击工具栏的搜索图标应该打开搜索模态框
- [ ] **键盘快捷键**: 按 `Ctrl+F` (Windows/Linux) 或 `⌘+F` (Mac) 应该打开搜索模态框
- [ ] **搜索界面**: 搜索模态框应该显示输入框和过滤选项

### 2. 搜索功能测试

首先创建一些测试便签：

1. 双击画布创建便签，标题："工作计划"，内容："明天要完成项目报告"
2. 再创建一个便签，标题："购物清单"，内容："买牛奶、面包、苹果"
3. 创建第三个便签，标题："学习笔记"，内容："React Hooks 使用方法"

然后测试搜索：

- [ ] **文本搜索**: 搜索"工作"应该找到"工作计划"便签
- [ ] **内容搜索**: 搜索"牛奶"应该找到"购物清单"便签
- [ ] **大小写不敏感**: 搜索"react"应该找到"学习笔记"便签

### 3. 搜索结果交互测试

- [ ] **高亮显示**: 搜索结果中的匹配文本应该高亮显示
- [ ] **便签导航**: 点击搜索结果应该：
  - 关闭搜索模态框
  - 自动导航到选中的便签位置
  - 将便签居中显示
  - 将便签置于最前（z-index 最高）
  - 显示成功消息

### 4. 过滤功能测试

- [ ] **日期过滤**: 选择"今天"应该只显示今天创建的便签
- [ ] **内容过滤**: 勾选"仅显示有内容的便签"应该过滤掉空便签
- [ ] **颜色过滤**: 如果有不同颜色的便签，颜色过滤应该正常工作

### 5. 键盘快捷键测试

- [ ] **搜索快捷键**: `Ctrl/⌘ + F` 打开搜索
- [ ] **控制台聚焦**: `Ctrl/⌘ + K` 或 `/` 聚焦控制台输入框
- [ ] **保存快捷键**: `Ctrl/⌘ + S` 显示保存状态信息
- [ ] **创建便签**: `Ctrl/⌘ + N` 在画布中心创建新便签
- [ ] **缩放控制**: `Ctrl/⌘ + =/-/0` 控制画布缩放

### 6. 控制台聚焦功能测试

- [ ] **快捷键聚焦**: 按 `/` 或 `Ctrl/⌘ + K` 应该将焦点移到控制台输入框
- [ ] **立即输入**: 聚焦后应该可以立即开始输入
- [ ] **原有功能**: 聚焦后所有控制台功能（AI 生成、创建便签）应该正常工作

### 7. 用户体验测试

- [ ] **响应性**: 搜索应该实时响应，无明显延迟
- [ ] **错误处理**: 无搜索结果时应该显示适当的空状态
- [ ] **关闭行为**: 可以通过 ESC 键或点击关闭按钮关闭搜索模态框
- [ ] **状态保持**: 搜索导航后画布状态应该正确保持

## 🔧 测试步骤

### 步骤 1: 准备测试数据

1. 打开应用 http://localhost:5173/
2. 双击画布创建 3-5 个不同内容的便签
3. 确保便签有不同的标题和内容

### 步骤 2: 测试搜索功能

1. 点击工具栏搜索按钮或按 `Ctrl/⌘ + F`
2. 在搜索框中输入不同的关键词
3. 验证搜索结果是否正确

### 步骤 3: 测试导航功能

1. 从搜索结果中选择一个便签
2. 验证是否正确导航到便签位置
3. 检查便签是否居中显示并置于最前

### 步骤 4: 测试键盘快捷键

1. 测试所有快捷键组合
2. 验证控制台聚焦功能
3. 确认快捷键不会与浏览器默认行为冲突

## 🐛 常见问题排查

### 搜索模态框不打开

- 检查控制台是否有 JavaScript 错误
- 验证 `searchModalOpen` 状态是否正确更新
- 确认快捷键监听器是否正确绑定

### 搜索结果不正确

- 检查搜索逻辑中的文本匹配算法
- 验证便签数据是否正确加载
- 确认过滤条件是否正确应用

### 导航功能不工作

- 检查 `selectNote` 方法中的坐标计算
- 验证画布状态更新是否正确
- 确认 `bringNoteToFront` 方法是否正常工作

### 键盘快捷键冲突

- 检查快捷键是否与浏览器默认行为冲突
- 验证输入框内的快捷键过滤逻辑
- 确认事件传播是否被正确阻止

## ✅ 测试完成标准

所有功能测试项目都通过，且：

1. 无控制台错误
2. 用户体验流畅
3. 所有交互响应及时
4. 搜索结果准确
5. 导航功能正确
6. 键盘快捷键全部可用

测试完成后，搜索功能即可认为成功集成并可以投入使用。
